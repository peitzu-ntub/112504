<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>add store</title>

    <link href="../js/regist_store.css" rel="stylesheet">
    <script src="../js/jquery-3.6.4.min.js"></script>

</head>

<body>
    <div class="logout" type="button" name="按鈕名稱" onclick="location.href='chose_store copy.html'">
        <div align="left">
            <img src="../images/back.png" alt="返回icon" />
            <span style="font-size: 5px;">返回</span>
        </div>
    </div>
    <div class="who">
        <div align="left">
            <img src="../images/worker64.png" alt="老闆圖片" />
            <span style="font-size: 28px;"><div id="boss_name">老闆名字</div></span>
        </div>
    </div>
    <div class="title">
        <div align="left">
            <img src="../images/restaurant128.png" alt="店家圖片" />
            <span style="font-size: 28px;">新增店家資訊</span>
        </div>
    </div>

    <div class="container-wrapper">
        <div class="container1">
            <form action="#">
                <div class="user-details">
                    <div class="input-box">
                        <span class="details" style="font-size: 20px;">店家代號：</span>
                        <input type="text" name="store_id" id="store_id" placeholder="請輸入店家代號" required>
                        <input type="hidden" name="boss_identity" id="boss_identity" value="boss">
                        <!-- 之後跳進來的時候要把身分證資料放進去boss_identity這裡，現在是假的老闆身分證 -->
                    </div>
                    <div class="input-box">
                        <span class="details" style="font-size: 20px;">店家名稱：</span>
                        <input type="text" name="store_name" id="store_name" placeholder="請輸入店家名稱" required>
                    </div>
                    <div class="input-box">
                        <span class="details" style="font-size: 20px;">店家電話：</span>
                        <input type="text" name="store_tel" id="store_tel" placeholder="請輸入店家電話" required>
                    </div>
                    <div class="input-box">
                        <span class="details" style="font-size: 20px;">店家地址：</span>
                        <!-- <select id="county" onchange="populateDistricts()">
                            <option value="台北市">台北市</option>
                            <option value="新北市">新北市</option>
                            <option value="桃園市">桃園市</option>
                            <option value="台中市">台中市</option>
                            <option value="台南市">台南市</option>
                            <option value="高雄市">高雄市</option>
                            <option value="宜蘭縣">宜蘭縣</option>
                            <option value="新竹市">新竹市</option>
                            <option value="新竹縣">新竹縣</option>
                            <option value="苗栗市">苗栗市</option>
                            <option value="彰化市">彰化市</option>
                            <option value="南投市">南投市</option>
                            <option value="雲林市">雲林市</option>
                            <option value="嘉義市">嘉義市</option>
                            <option value="嘉義縣">嘉義縣</option>
                            <option value="屏東縣">屏東縣</option>
                            <option value="花蓮縣">花蓮縣</option>
                            <option value="台東縣">台東縣</option>
                            <option value="澎湖縣">澎湖縣</option>
                            <option value="基隆市">基隆市</option>
                        </select>
                        <select id="district"></select><br> -->
                        <input type="text" name="store_address" id="store_address" placeholder="請輸入正確地址" required>
                    </div>
                    <div class="input-box">
                        <span class="details" style="font-size: 20px;">店家桌數：</span>
                        <input type="number" min=1 name="table_count" id="table_count" placeholder="請輸入桌數" required>
                    </div>
                </div>
        </div>
    </div>
    <input class="addstore" type="submit" value="確定" style="font-size: 5px;">
            </form>
        <!-- <img src="../images/OK.png" alt="OK圖片" /> -->
    </input>
</body>


<script>
    //選擇縣市
/*     var districtsByCounty = {
        "台北市": ["中正區", "大同區", "中山區", "松山區", "大安區", "萬華區", "信義區", "士林區", "北投區", "內湖區", "南港區", "文山區"],
        "新北市": ["板橋區", "三重區", "中和區", "永和區", "新莊區", "新店區", "樹林區", "鶯歌區", "三峽區", "淡水區", "汐止區", "瑞芳區"],
        "桃園市": ["桃園區", "中壢區", "平鎮區", "八德區", "楊梅區", "龍潭區", "大溪區", "蘆竹區", "大園區", "觀音區", "新屋區", "復興區"],
        "台中市": ["中區", "東區", "南區", "西區", "北區", "西屯區", "南屯區", "北屯區", "豐原區", "大里區", "太平區", "清水區"],
        "台南市": ["中西區", "東區", "南區", "北區", "安平區", "安南區", "永康區", "歸仁區", "新化區", "左鎮區", "玉井區", "楠西區"],
        "高雄市": ["新興區", "前金區", "苓雅區", "鹽埕區", "鼓山區", "旗津區", "前鎮區", "三民區", "楠梓區", "小港區", "左營區", "岡山區"],
        "宜蘭縣": ["宜蘭市", "羅東鎮", "蘇澳鎮", "頭城鎮", "礁溪鄉", "壯圍鄉", "員山鄉", "五結鄉", "三星鄉", "大同鄉", "冬山鄉", "南澳鄉"],
        "新竹市": ["東區", "北區", "香山區"],
        "新竹縣": ["竹北市", "竹東鎮", "新埔鎮", "關西鎮", "湖口鄉", "新豐鄉", "芎林鄉", "橫山鄉", "北埔鄉", "寶山鄉", "峨眉鄉"],
        "苗栗市": ["苗栗市", "竹南鎮", "頭份市", "後龍鎮", "通霄鎮", "苑裡鎮", "卓蘭鎮", "造橋鄉", "公館鄉", "銅鑼鄉", "三義鄉", "西湖鄉", "南庄鄉", "泰安鄉"],
        "彰化市": ["彰化市", "鹿港鎮", "和美鎮", "北斗鎮", "員林市", "溪湖鎮", "田中鎮", "二林鎮", "線西鄉", "伸港鄉", "福興鄉", "秀水鄉", "花壇鄉", "芬園鄉", "大村鄉", "埔鹽鄉", "埔心鄉", "永靖鄉", "社頭鄉", "二水鄉", "田尾鄉", "埤頭鄉"],
        "南投市": ["南投市", "埔里鎮", "草屯鎮", "竹山鎮", "集集鎮", "名間鄉", "魚池鄉", "國姓鄉", "水里鄉", "信義鄉", "仁愛鄉"],
        "雲林市": ["斗六市", "斗南鎮", "虎尾鎮", "西螺鎮", "土庫鎮", "北港鎮", "古坑鄉", "大埤鄉", "莿桐鄉", "林內鄉", "二崙鄉", "崙背鄉", "麥寮鄉", "東勢鄉", "褒忠鄉", "臺西鄉", "元長鄉", "四湖鄉", "口湖鄉", "水林鄉"],
        "嘉義市": ["東區", "西區"],
        "嘉義縣": ["民雄鄉", "溪口鄉", "新港鄉", "六腳鄉", "東石鄉", "義竹鄉", "鹿草鄉", "太保市", "朴子市", "水上鄉", "中埔鄉", "竹崎鄉", "梅山鄉", "番路鄉", "大埔鄉", "阿里山鄉"],
        "屏東縣": ["屏東市", "三地門鄉", "霧台鄉", "瑪家鄉", "九如鄉", "里港鄉", "高樹鄉", "鹽埔鄉", "長治鄉", "麟洛鄉", "竹田鄉", "內埔鄉", "萬丹鄉", "潮州鎮", "泰武鄉", "來義鄉", "萬巒鄉", "崁頂鄉", "新埤鄉", "南州鄉", "林邊鄉", "東港鎮", "琉球鄉", "佳冬鄉", "新園鄉", "枋寮鄉", "枋山鄉", "春日鄉", "獅子鄉", "車城鄉", "牡丹鄉", "恆春鎮", "滿州鄉"],
        "花蓮縣": ["花蓮市", "新城鄉", "秀林鄉", "吉安鄉", "壽豐鄉", "鳳林鎮", "光復鄉", "豐濱鄉", "瑞穗鄉", "萬榮鄉", "玉里鎮", "卓溪鄉", "富里鄉"],
        "基隆市": ["仁愛區", "中正區", "信義區", "中山區", "安樂區", "暖暖區", "七堵區"],
        "台東縣": ["台東市", "成功鎮", "關山鎮", "卑南鄉", "大武鄉", "太麻里鄉", "東河鄉", "長濱鄉", "鹿野鄉", "池上鄉", "綠島鄉", "海端鄉", "延平鄉", "霧臺鄉", "金峰鄉", "達仁鄉"],
        "澎湖縣": ["馬公市", "西嶼鄉", "望安鄉", "七美鄉", "白沙鄉", "湖西鄉", "水頭鄉"]
    };
    function populateDistricts() {
        var county = document.getElementById("county");
        var district = document.getElementById("district");
        district.innerHTML = "";
        if (county.value === "") {
            var defaultOption = document.createElement("option");
            defaultOption.text = "請選擇縣市";
            district.add(defaultOption);
            return;
        }
        var districts = districtsByCounty[county.value];
        for (var i = 0; i < districts.length; i++) {
            var option = document.createElement("option");
            option.text = districts[i];
            option.value = districts[i];
            district.add(option);
        }
    } */

    //當網頁準備好的時候，做以下的動作(函式)
    $(document).ready(function () {
       
        document.getElementById("boss_name").innerHTML = '張浿慈';
         //form的submit按鈕按下去的動作
        $("form").on("submit", function (e) {

        var urlParams = new URLSearchParams(window.location.search);
		var boss_identity = urlParams.get('boss_identity');
        document.getElementById("boss_identity").value = boss_identity;

            //1.先把準備拋回去的資料「序列化」整理成json格式的字串
            var dataString = $(this).serialize();

            //可以把字串顯示出來看看是否正確
            alert(dataString);               

            //2.透過ajax(非同步JavaScript)把字串送給後端的PHP網站
            $.ajax({
                //HTTP的通訊模式有：GET、POST、DELETE。這次採用POST的模式，僅傳遞該傳遞的資料，不是整個網頁送回去
                type: "POST",
                //指定要連接的PHP位址
                url: "../bin/editStore.php",
                //要傳送的資料內容
                data: dataString,
                //獲得正確回應時，要做的事情
                success: function (response) {
                    //alert(response);
                    var json = $.parseJSON(response);
                    alert(json.message);
                    if (json.result == 'OK') {
                        //alert (json.message);
                        $("#message").html('成功：\n' + json.message);
                    } else {
                        $("#message").html('失敗：\n' + json.message);
                    }
                },
                //獲得不正確的回應時，要做的事情
                error: function (response) {
                    $("#message").html(response);
                }
            });

            e.preventDefault();
        });
    });
</script>
</html>